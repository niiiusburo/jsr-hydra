<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JSR Hydra â€” Mission Control</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg-0: #06070a;
  --bg-1: #0c0e14;
  --bg-2: #13161f;
  --bg-3: #1a1e2a;
  --border: #1f2435;
  --border-hover: #2a3048;
  --text-100: #eaecf3;
  --text-80: #b4b9cc;
  --text-60: #7d849e;
  --text-40: #4a5170;
  --text-20: #2d3350;
  --accent: #00e5b8;
  --accent-dim: rgba(0, 229, 184, 0.12);
  --accent-glow: rgba(0, 229, 184, 0.25);
  --green: #00e5b8;
  --red: #ff4a6e;
  --blue: #5b8def;
  --orange: #ff9f43;
  --purple: #b07fff;
  --yellow: #ffd43b;
  --green-dim: rgba(0, 229, 184, 0.1);
  --red-dim: rgba(255, 74, 110, 0.1);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg-0);
  color: var(--text-100);
  font-family: 'Outfit', -apple-system, sans-serif;
  font-size: 13px;
  overflow-x: hidden;
  min-height: 100vh;
}

body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-image:
    linear-gradient(rgba(255,255,255,0.01) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.01) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none;
  z-index: 0;
}

.sidebar {
  position: fixed;
  left: 0; top: 0; bottom: 0;
  width: 220px;
  background: var(--bg-1);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  z-index: 100;
}

.sidebar-brand {
  padding: 20px 18px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 12px;
}

.brand-icon {
  width: 34px; height: 34px;
  border-radius: 8px;
  background: linear-gradient(135deg, var(--accent), var(--blue));
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'IBM Plex Mono', monospace;
  font-weight: 800;
  font-size: 15px;
  color: var(--bg-0);
}

.brand-text { display: flex; flex-direction: column; }
.brand-name { font-weight: 700; font-size: 14px; letter-spacing: 1.5px; color: var(--text-100); }
.brand-sub { font-size: 10px; color: var(--text-40); letter-spacing: 0.5px; }

.sidebar-nav {
  flex: 1;
  padding: 12px 8px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.nav-section {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 2px;
  color: var(--text-40);
  padding: 16px 12px 6px;
  text-transform: uppercase;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  border-radius: 6px;
  color: var(--text-60);
  cursor: pointer;
  transition: all 0.15s;
  font-size: 13px;
  text-decoration: none;
  position: relative;
}

.nav-item:hover { background: var(--bg-3); color: var(--text-100); }

.nav-item.active {
  background: var(--accent-dim);
  color: var(--accent);
}

.nav-item.active::before {
  content: '';
  position: absolute;
  left: 0; top: 6px; bottom: 6px;
  width: 3px;
  background: var(--accent);
  border-radius: 0 3px 3px 0;
}

.nav-icon { font-size: 16px; width: 20px; text-align: center; }

.sidebar-footer {
  padding: 14px 18px;
  border-top: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.version-badge {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 10px;
  color: var(--accent);
  background: var(--accent-dim);
  padding: 3px 10px;
  border-radius: 4px;
  border: 1px solid rgba(0,229,184,0.15);
  display: inline-block;
  width: fit-content;
}

.connection-row {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  color: var(--text-40);
}

.connection-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--green);
  animation: pulse-dot 2s infinite;
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; box-shadow: 0 0 0 0 var(--accent-glow); }
  50% { opacity: 0.7; box-shadow: 0 0 0 4px transparent; }
}

.main {
  margin-left: 220px;
  min-height: 100vh;
  position: relative;
  z-index: 1;
}

.topbar {
  height: 52px;
  border-bottom: 1px solid var(--border);
  background: var(--bg-1);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(12px);
}

.topbar-left { display: flex; align-items: center; gap: 16px; }

.regime-pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.regime-pill.trending-up {
  background: var(--green-dim);
  color: var(--green);
  border: 1px solid rgba(0,229,184,0.2);
}

.regime-dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; }

.topbar-right { display: flex; align-items: center; gap: 20px; }

.topbar-stat { display: flex; flex-direction: column; align-items: flex-end; }
.topbar-stat-label { font-size: 9px; color: var(--text-40); text-transform: uppercase; letter-spacing: 1px; }
.topbar-stat-value { font-family: 'IBM Plex Mono', monospace; font-size: 14px; font-weight: 600; }
.topbar-stat-value.positive { color: var(--green); }
.topbar-stat-value.negative { color: var(--red); }

.dashboard {
  padding: 20px 24px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: auto;
  gap: 16px;
}

.card {
  background: var(--bg-1);
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  transition: border-color 0.2s;
}

.card:hover { border-color: var(--border-hover); }

.card-header {
  padding: 14px 16px 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card-title {
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1.5px;
  color: var(--text-40);
  text-transform: uppercase;
}

.card-badge {
  font-size: 9px;
  padding: 2px 8px;
  border-radius: 4px;
  font-family: 'IBM Plex Mono', monospace;
}

.card-body { padding: 12px 16px 16px; }

.pnl-row {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

.pnl-card {
  background: var(--bg-1);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  position: relative;
  overflow: hidden;
}

.pnl-card::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
}

.pnl-card.positive::after { background: var(--green); }
.pnl-card.negative::after { background: var(--red); }
.pnl-card.neutral::after { background: var(--text-40); }

.pnl-label {
  font-size: 10px;
  color: var(--text-40);
  letter-spacing: 1px;
  text-transform: uppercase;
  font-weight: 600;
  margin-bottom: 8px;
}

.pnl-value {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 24px;
  font-weight: 700;
  line-height: 1;
  margin-bottom: 4px;
}

.pnl-value.positive { color: var(--green); }
.pnl-value.negative { color: var(--red); }

.pnl-sub {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 11px;
  color: var(--text-40);
}

.allocation-card { grid-column: 1 / 3; }
.positions-card { grid-column: 3 / 5; }
.equity-card { grid-column: 1 / 3; }
.strategies-card { grid-column: 3 / 5; }
.events-card { grid-column: 1 / -1; }

.alloc-bar {
  display: flex;
  height: 32px;
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 12px;
}

.alloc-segment {
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 10px;
  font-weight: 600;
  color: var(--bg-0);
  transition: width 0.5s ease;
}

.alloc-legend { display: flex; gap: 16px; flex-wrap: wrap; }

.alloc-legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--text-60);
}

.alloc-dot { width: 8px; height: 8px; border-radius: 2px; }

.alloc-pct {
  font-family: 'IBM Plex Mono', monospace;
  color: var(--text-80);
  font-weight: 600;
}

.table-wrap { overflow-x: auto; }

table { width: 100%; border-collapse: collapse; }

th {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  color: var(--text-40);
  text-transform: uppercase;
  text-align: left;
  padding: 8px 10px;
  border-bottom: 1px solid var(--border);
}

td {
  font-size: 12px;
  padding: 10px;
  border-bottom: 1px solid var(--border);
  font-family: 'IBM Plex Mono', monospace;
  color: var(--text-80);
}

tr:last-child td { border-bottom: none; }
tr:hover td { background: var(--bg-2); }

.pill {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.pill-buy { background: var(--green-dim); color: var(--green); }
.pill-sell { background: var(--red-dim); color: var(--red); }

.equity-chart { height: 180px; position: relative; overflow: hidden; }
.equity-svg { width: 100%; height: 100%; }

.strat-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.strat-mini {
  background: var(--bg-2);
  border-radius: 6px;
  padding: 10px 12px;
  border-left: 3px solid;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.strat-left { display: flex; flex-direction: column; gap: 2px; }
.strat-name { font-size: 11px; font-weight: 600; color: var(--text-100); }
.strat-status { font-size: 9px; color: var(--text-40); text-transform: uppercase; letter-spacing: 1px; }
.strat-right { text-align: right; }
.strat-wr { font-family: 'IBM Plex Mono', monospace; font-size: 14px; font-weight: 700; }
.strat-pf { font-size: 9px; color: var(--text-40); font-family: 'IBM Plex Mono', monospace; }

.event-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid var(--border);
  font-size: 12px;
}

.event-row:last-child { border-bottom: none; }

.event-time {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 10px;
  color: var(--text-40);
  min-width: 70px;
}

.event-badge {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 2px 8px;
  border-radius: 3px;
  min-width: 60px;
  text-align: center;
}

.event-badge.info { background: rgba(91,141,239,0.1); color: var(--blue); }
.event-badge.warning { background: rgba(255,159,67,0.1); color: var(--orange); }
.event-badge.success { background: var(--green-dim); color: var(--green); }

.event-msg { color: var(--text-80); flex: 1; }
.event-source { color: var(--text-40); font-size: 10px; font-family: 'IBM Plex Mono', monospace; }

.status-bar {
  position: fixed;
  bottom: 0; left: 220px; right: 0;
  height: 28px;
  background: var(--bg-1);
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  font-size: 10px;
  color: var(--text-40);
  font-family: 'IBM Plex Mono', monospace;
  z-index: 50;
}

.status-items { display: flex; gap: 20px; align-items: center; }
.status-item { display: flex; align-items: center; gap: 5px; }
.status-dot-sm { width: 5px; height: 5px; border-radius: 50%; }
.status-dot-sm.ok { background: var(--green); }
.status-dot-sm.warn { background: var(--orange); }
.status-dot-sm.err { background: var(--red); }

.price-ticker { display: flex; align-items: baseline; gap: 8px; }
.price-symbol { font-size: 11px; color: var(--text-60); font-weight: 600; }
.price-value { font-family: 'IBM Plex Mono', monospace; font-size: 13px; font-weight: 600; color: var(--text-100); }
.price-spread { font-size: 9px; color: var(--text-40); }

@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.card, .pnl-card { animation: fade-in 0.4s ease backwards; }
.pnl-card:nth-child(1) { animation-delay: 0.05s; }
.pnl-card:nth-child(2) { animation-delay: 0.1s; }
.pnl-card:nth-child(3) { animation-delay: 0.15s; }
.pnl-card:nth-child(4) { animation-delay: 0.2s; }
.allocation-card { animation-delay: 0.25s; }
.positions-card { animation-delay: 0.3s; }
.equity-card { animation-delay: 0.35s; }
.strategies-card { animation-delay: 0.4s; }
.events-card { animation-delay: 0.45s; }

@media (max-width: 1200px) {
  .dashboard { grid-template-columns: 1fr 1fr; }
  .pnl-row { grid-template-columns: repeat(2, 1fr); }
  .allocation-card, .positions-card,
  .equity-card, .strategies-card,
  .events-card { grid-column: 1 / -1; }
}

::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--bg-0); }
::-webkit-scrollbar-thumb { background: var(--text-20); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-40); }
</style>
</head>
<body>

<nav class="sidebar">
  <div class="sidebar-brand">
    <div class="brand-icon">H</div>
    <div class="brand-text">
      <div class="brand-name">JSR HYDRA</div>
      <div class="brand-sub">Mission Control</div>
    </div>
  </div>

  <div class="sidebar-nav">
    <div class="nav-section">Overview</div>
    <a class="nav-item active">
      <span class="nav-icon">&#9673;</span> Dashboard
    </a>

    <div class="nav-section">Trading</div>
    <a class="nav-item">
      <span class="nav-icon">&#9672;</span> Strategies
    </a>
    <a class="nav-item">
      <span class="nav-icon">&#9671;</span> Trades
    </a>
    <a class="nav-item">
      <span class="nav-icon">&#9678;</span> Regime
    </a>
    <a class="nav-item">
      <span class="nav-icon">&#9636;</span> Positions
    </a>

    <div class="nav-section">System</div>
    <a class="nav-item">
      <span class="nav-icon">&#9643;</span> Accounts
    </a>
    <a class="nav-item">
      <span class="nav-icon">&#11041;</span> ML Models
    </a>
    <a class="nav-item">
      <span class="nav-icon">&#9881;</span> Settings
    </a>
  </div>

  <div class="sidebar-footer">
    <div class="version-badge" id="version-badge">v1.0.0 Hydra</div>
    <div class="connection-row">
      <div class="connection-dot" id="conn-dot"></div>
      <span id="conn-text">Connected</span>
    </div>
  </div>
</nav>

<main class="main">
  <header class="topbar">
    <div class="topbar-left">
      <div class="regime-pill trending-up" id="regime-pill">
        <div class="regime-dot"></div>
        <span id="regime-text">TRENDING UP</span>
        <span style="opacity:0.6; font-size:10px" id="regime-conf">87%</span>
      </div>

      <div class="price-ticker">
        <span class="price-symbol">XAUUSD</span>
        <span class="price-value" id="price-bid">2,948.32</span>
        <span class="price-spread" id="price-spread">sp: 2.1</span>
      </div>
    </div>

    <div class="topbar-right">
      <div class="topbar-stat">
        <span class="topbar-stat-label">Equity</span>
        <span class="topbar-stat-value" id="equity-value">$52,847.60</span>
      </div>
      <div class="topbar-stat">
        <span class="topbar-stat-label">Daily P&amp;L</span>
        <span class="topbar-stat-value positive" id="daily-pnl">+$1,247.30</span>
      </div>
      <div class="topbar-stat">
        <span class="topbar-stat-label">Drawdown</span>
        <span class="topbar-stat-value" id="drawdown" style="color: var(--text-100)">3.2%</span>
      </div>
      <div class="topbar-stat">
        <span class="topbar-stat-label">System</span>
        <span class="topbar-stat-value" style="color: var(--green); font-size:12px" id="sys-status">&#9679; RUNNING</span>
      </div>
    </div>
  </header>

  <div class="dashboard">
    <div class="pnl-row">
      <div class="pnl-card positive">
        <div class="pnl-label">Today</div>
        <div class="pnl-value positive" id="pnl-today">+$1,247.30</div>
        <div class="pnl-sub">+2.4% &middot; 7 trades</div>
      </div>
      <div class="pnl-card positive">
        <div class="pnl-label">This Week</div>
        <div class="pnl-value positive">+$3,892.50</div>
        <div class="pnl-sub">+7.8% &middot; 34 trades</div>
      </div>
      <div class="pnl-card positive">
        <div class="pnl-label">This Month</div>
        <div class="pnl-value positive">+$8,415.00</div>
        <div class="pnl-sub">+18.9% &middot; 142 trades</div>
      </div>
      <div class="pnl-card neutral">
        <div class="pnl-label">Win Rate (30d)</div>
        <div class="pnl-value" style="color: var(--text-100)">72.4%</div>
        <div class="pnl-sub">PF: 2.14 &middot; Sharpe: 1.38</div>
      </div>
    </div>

    <div class="card allocation-card">
      <div class="card-header">
        <span class="card-title">Capital Allocation</span>
        <span class="card-badge" style="background: var(--accent-dim); color: var(--accent);">RL Agent</span>
      </div>
      <div class="card-body">
        <div class="alloc-bar">
          <div class="alloc-segment" style="width: 15%; background: var(--accent);">15%</div>
          <div class="alloc-segment" style="width: 45%; background: var(--blue);">45%</div>
          <div class="alloc-segment" style="width: 25%; background: var(--orange);">25%</div>
          <div class="alloc-segment" style="width: 15%; background: var(--purple);">15%</div>
        </div>
        <div class="alloc-legend">
          <div class="alloc-legend-item">
            <div class="alloc-dot" style="background: var(--accent);"></div>
            A: Trend <span class="alloc-pct">15%</span>
          </div>
          <div class="alloc-legend-item">
            <div class="alloc-dot" style="background: var(--blue);"></div>
            B: Grid <span class="alloc-pct">45%</span>
          </div>
          <div class="alloc-legend-item">
            <div class="alloc-dot" style="background: var(--orange);"></div>
            C: Breakout <span class="alloc-pct">25%</span>
          </div>
          <div class="alloc-legend-item">
            <div class="alloc-dot" style="background: var(--purple);"></div>
            D: Volatility <span class="alloc-pct">15%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card positions-card">
      <div class="card-header">
        <span class="card-title">Open Positions</span>
        <span class="card-badge" style="background: var(--bg-3); color: var(--text-60);">3 Active</span>
      </div>
      <div class="card-body">
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Symbol</th>
                <th>Side</th>
                <th>Lots</th>
                <th>Entry</th>
                <th>Current</th>
                <th>P&amp;L</th>
                <th>Strategy</th>
              </tr>
            </thead>
            <tbody id="positions-tbody">
              <tr>
                <td style="color: var(--text-100); font-weight: 600;">XAUUSD</td>
                <td><span class="pill pill-buy">BUY</span></td>
                <td>0.15</td>
                <td>2,941.20</td>
                <td id="pos1-current">2,948.32</td>
                <td style="color: var(--green); font-weight: 600;" id="pos1-pnl">+$106.80</td>
                <td><span style="color: var(--blue);">B: Grid</span></td>
              </tr>
              <tr>
                <td style="color: var(--text-100); font-weight: 600;">XAUUSD</td>
                <td><span class="pill pill-buy">BUY</span></td>
                <td>0.08</td>
                <td>2,945.60</td>
                <td id="pos2-current">2,948.32</td>
                <td style="color: var(--green); font-weight: 600;" id="pos2-pnl">+$21.76</td>
                <td><span style="color: var(--accent);">A: Trend</span></td>
              </tr>
              <tr>
                <td style="color: var(--text-100); font-weight: 600;">XAUUSD</td>
                <td><span class="pill pill-sell">SELL</span></td>
                <td>0.05</td>
                <td>2,950.10</td>
                <td id="pos3-current">2,948.32</td>
                <td style="color: var(--green); font-weight: 600;" id="pos3-pnl">+$8.90</td>
                <td><span style="color: var(--orange);">C: Breakout</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="card equity-card">
      <div class="card-header">
        <span class="card-title">Equity Curve</span>
        <span class="card-badge" style="background: var(--bg-3); color: var(--text-60);">30 Days</span>
      </div>
      <div class="card-body">
        <div class="equity-chart" id="equity-chart"></div>
      </div>
    </div>

    <div class="card strategies-card">
      <div class="card-header">
        <span class="card-title">Strategies</span>
        <span class="card-badge" style="background: var(--green-dim); color: var(--green);">3/4 Active</span>
      </div>
      <div class="card-body">
        <div class="strat-grid">
          <div class="strat-mini" style="border-color: var(--accent);">
            <div class="strat-left">
              <div class="strat-name">A: Trend Follow</div>
              <div class="strat-status" style="color: var(--green);">&#9679; Active</div>
            </div>
            <div class="strat-right">
              <div class="strat-wr" style="color: var(--green);">78%</div>
              <div class="strat-pf">PF: 2.41</div>
            </div>
          </div>
          <div class="strat-mini" style="border-color: var(--blue);">
            <div class="strat-left">
              <div class="strat-name">B: Grid</div>
              <div class="strat-status" style="color: var(--green);">&#9679; Active</div>
            </div>
            <div class="strat-right">
              <div class="strat-wr" style="color: var(--green);">69%</div>
              <div class="strat-pf">PF: 1.87</div>
            </div>
          </div>
          <div class="strat-mini" style="border-color: var(--orange);">
            <div class="strat-left">
              <div class="strat-name">C: Breakout</div>
              <div class="strat-status" style="color: var(--green);">&#9679; Active</div>
            </div>
            <div class="strat-right">
              <div class="strat-wr" style="color: var(--green);">71%</div>
              <div class="strat-pf">PF: 2.08</div>
            </div>
          </div>
          <div class="strat-mini" style="border-color: var(--purple);">
            <div class="strat-left">
              <div class="strat-name">D: Volatility</div>
              <div class="strat-status" style="color: var(--text-40);">&#9679; Paused</div>
            </div>
            <div class="strat-right">
              <div class="strat-wr" style="color: var(--text-40);">&mdash;</div>
              <div class="strat-pf">Phase 5</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card events-card">
      <div class="card-header">
        <span class="card-title">Event Log</span>
        <span class="card-badge" style="background: var(--bg-3); color: var(--text-60);">Live</span>
      </div>
      <div class="card-body" id="events-body">
        <div class="event-row">
          <span class="event-time">14:32:08</span>
          <span class="event-badge success">TRADE</span>
          <span class="event-msg">BUY XAUUSD 0.15 @ 2941.20 &mdash; Grid level 3 hit</span>
          <span class="event-source">strategy_b</span>
        </div>
        <div class="event-row">
          <span class="event-time">14:30:00</span>
          <span class="event-badge info">REGIME</span>
          <span class="event-msg">Regime changed: RANGING &rarr; TRENDING_UP (conf: 87%)</span>
          <span class="event-source">regime_detector</span>
        </div>
        <div class="event-row">
          <span class="event-time">14:28:45</span>
          <span class="event-badge success">TRADE</span>
          <span class="event-msg">CLOSE SELL XAUUSD 0.10 &mdash; P&amp;L: +$342.00</span>
          <span class="event-source">strategy_a</span>
        </div>
        <div class="event-row">
          <span class="event-time">14:15:00</span>
          <span class="event-badge info">ALLOC</span>
          <span class="event-msg">Allocation updated: A=15% B=45% C=25% D=15% (source: RL_AGENT)</span>
          <span class="event-source">meta_controller</span>
        </div>
        <div class="event-row">
          <span class="event-time">14:00:12</span>
          <span class="event-badge warning">DRIFT</span>
          <span class="event-msg">ADDM drift detected on HMM model &mdash; scheduling retrain</span>
          <span class="event-source">addm_drift</span>
        </div>
        <div class="event-row">
          <span class="event-time">13:45:00</span>
          <span class="event-badge info">MODEL</span>
          <span class="event-msg">SAC meta-controller retrained &mdash; v1.0.3 deployed (Sharpe: 1.42)</span>
          <span class="event-source">retrainer</span>
        </div>
      </div>
    </div>
  </div>
</main>

<footer class="status-bar">
  <div class="status-items">
    <div class="status-item"><div class="status-dot-sm ok"></div> MT5</div>
    <div class="status-item"><div class="status-dot-sm ok"></div> PostgreSQL</div>
    <div class="status-item"><div class="status-dot-sm ok"></div> Redis</div>
    <div class="status-item"><div class="status-dot-sm ok"></div> Engine</div>
    <div class="status-item"><div class="status-dot-sm ok"></div> Retrainer</div>
    <div class="status-item"><div class="status-dot-sm warn" id="api-dot"></div> <span id="api-text">API (mock)</span></div>
  </div>
  <div style="display: flex; gap: 16px; align-items: center;">
    <span id="clock">14:32:08 UTC</span>
    <span style="color: var(--accent);">v1.0.0</span>
  </div>
</footer>

<script>
const API_URL = window.location.origin + '/api';
let mockMode = true;
let basePrice = 2948.32;

function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent =
    now.toISOString().substr(11, 8) + ' UTC';
}
setInterval(updateClock, 1000);

function simulatePrice() {
  basePrice += (Math.random() - 0.48) * 1.5;
  const price = basePrice.toFixed(2);
  const spread = (1.8 + Math.random() * 0.8).toFixed(1);

  document.getElementById('price-bid').textContent =
    Number(price).toLocaleString('en-US', {minimumFractionDigits: 2});
  document.getElementById('price-spread').textContent = 'sp: ' + spread;

  const p1entry = 2941.20, p2entry = 2945.60, p3entry = 2950.10;
  const p1pnl = ((basePrice - p1entry) * 0.15 * 100).toFixed(2);
  const p2pnl = ((basePrice - p2entry) * 0.08 * 100).toFixed(2);
  const p3pnl = ((p3entry - basePrice) * 0.05 * 100).toFixed(2);

  document.getElementById('pos1-current').textContent = price;
  document.getElementById('pos2-current').textContent = price;
  document.getElementById('pos3-current').textContent = price;

  updatePnl('pos1-pnl', p1pnl);
  updatePnl('pos2-pnl', p2pnl);
  updatePnl('pos3-pnl', p3pnl);

  var totalPnl = (parseFloat(p1pnl) + parseFloat(p2pnl) + parseFloat(p3pnl) + 1110.00);
  document.getElementById('pnl-today').textContent = formatPnl(totalPnl);
  document.getElementById('daily-pnl').textContent = formatPnl(totalPnl);
}

function updatePnl(id, value) {
  var el = document.getElementById(id);
  var v = parseFloat(value);
  el.textContent = formatPnl(v);
  el.style.color = v >= 0 ? 'var(--green)' : 'var(--red)';
}

function formatPnl(v) {
  return (v >= 0 ? '+' : '-') + '$' + Math.abs(v).toFixed(2);
}

setInterval(simulatePrice, 800);

function drawEquityCurve() {
  var container = document.getElementById('equity-chart');
  var w = container.offsetWidth;
  var h = container.offsetHeight;

  var equity = 44000;
  var points = [];
  for (var i = 0; i < 30; i++) {
    equity += (Math.random() - 0.35) * 800;
    equity = Math.max(equity, 40000);
    points.push({ x: i, y: equity });
  }

  var minY = Math.min.apply(null, points.map(function(p) { return p.y; })) - 500;
  var maxY = Math.max.apply(null, points.map(function(p) { return p.y; })) + 500;

  function scaleX(x) { return (x / 29) * w; }
  function scaleY(y) { return h - ((y - minY) / (maxY - minY)) * h; }

  var pathD = points.map(function(p, i) {
    return (i === 0 ? 'M' : 'L') + ' ' + scaleX(p.x) + ' ' + scaleY(p.y);
  }).join(' ');

  var areaD = pathD + ' L ' + w + ' ' + h + ' L 0 ' + h + ' Z';

  container.innerHTML = '<svg class="equity-svg" viewBox="0 0 ' + w + ' ' + h + '" preserveAspectRatio="none">' +
    '<defs><linearGradient id="eq-grad" x1="0" y1="0" x2="0" y2="1">' +
    '<stop offset="0%" style="stop-color: var(--accent); stop-opacity: 0.3"/>' +
    '<stop offset="100%" style="stop-color: var(--accent); stop-opacity: 0.02"/>' +
    '</linearGradient></defs>' +
    '<path d="' + areaD + '" fill="url(#eq-grad)" />' +
    '<path d="' + pathD + '" fill="none" stroke="var(--accent)" stroke-width="2" vector-effect="non-scaling-stroke"/>' +
    '</svg>';
}

drawEquityCurve();
window.addEventListener('resize', drawEquityCurve);

async function checkAPI() {
  try {
    var res = await fetch(API_URL + '/health', { signal: AbortSignal.timeout(3000) });
    if (res.ok) {
      mockMode = false;
      document.getElementById('api-dot').className = 'status-dot-sm ok';
      document.getElementById('api-text').textContent = 'API';
      document.getElementById('conn-text').textContent = 'API Connected';
      var versionRes = await fetch(API_URL + '/version');
      var version = await versionRes.json();
      if (version.data) {
        document.getElementById('version-badge').textContent =
          'v' + version.data.version + ' ' + version.data.codename;
      }
    }
  } catch(e) {
    mockMode = true;
    document.getElementById('api-dot').className = 'status-dot-sm warn';
    document.getElementById('api-text').textContent = 'API (mock)';
    document.getElementById('conn-text').textContent = 'Mock Mode';
  }
}

checkAPI();
setInterval(checkAPI, 30000);

var eventMessages = [
  { badge: 'success', type: 'TRADE', msg: 'BUY XAUUSD 0.12 @ {price} \u2014 Trend confirmation', src: 'strategy_a' },
  { badge: 'success', type: 'TRADE', msg: 'CLOSE BUY XAUUSD 0.08 \u2014 P&L: +${pnl}', src: 'strategy_b' },
  { badge: 'info', type: 'REGIME', msg: 'Conviction score updated: {score}/100', src: 'regime_detector' },
  { badge: 'info', type: 'RISK', msg: 'Drawdown check passed: {dd}% (limit: 15%)', src: 'risk_manager' },
];

function addRandomEvent() {
  var evt = eventMessages[Math.floor(Math.random() * eventMessages.length)];
  var now = new Date();
  var time = now.toISOString().substr(11, 8);
  var msg = evt.msg
    .replace('{price}', basePrice.toFixed(2))
    .replace('{pnl}', (Math.random() * 400 + 50).toFixed(2))
    .replace('{score}', Math.floor(Math.random() * 40 + 50))
    .replace('{dd}', (Math.random() * 4 + 1).toFixed(1));

  var container = document.getElementById('events-body');
  var row = document.createElement('div');
  row.className = 'event-row';
  row.style.animation = 'fade-in 0.3s ease';
  row.innerHTML = '<span class="event-time">' + time + '</span>' +
    '<span class="event-badge ' + evt.badge + '">' + evt.type + '</span>' +
    '<span class="event-msg">' + msg + '</span>' +
    '<span class="event-source">' + evt.src + '</span>';

  container.insertBefore(row, container.firstChild);

  while (container.children.length > 15) {
    container.removeChild(container.lastChild);
  }
}

setInterval(addRandomEvent, 8000);
</script>

</body>
</html>
